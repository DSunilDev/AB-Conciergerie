(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[73760],{

/***/ 999752:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(367659);__web_req__(966859);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var X=__c.X;var H=__c.H;
var J8c=function(a,b){const c=b.subscribe({next:d=>{d.kind==="CREATE_COMMENT"?a.VRa(d.jE):d.kind==="DELETE_COMMENT"?a.D$a(d.Sy):d.kind==="VOTE_UPDATE"&&a.Scb(d.FW.Sy,d.FW.FW,d.lgc?"updated":void 0)}});return()=>c.unsubscribe()},K8c=function(a,b){const c=b.subscribe({next:d=>{d.kind==="PARTICIPANT_STATUS"&&a.$gb(d.Qfc)}});return()=>c.unsubscribe()},P8c=async function(a,b){const c=L$()();try{const d=new L8c(b.id,a.ka),e=new M8c(d.Exa,d.fcb,a.pv,a.ka,b.id,a.J,a.Hg),f=new N8c,{bkb:g}=c.r(await c.s(__webpack_require__.me(629152).then(()=>
__c.I8c))),h=new g(()=>O8c);a.connect({sessionId:b.id,Lu:e,EC:f,aU:h});a.setState({status:3,session:b,EC:f,YL:d,Lu:e,aU:h});e.LJb(b.id)}finally{c.s()}},Q8c={ke:"live_presentation_session_actioned",Af(a){return __c.Vn({presenting_context:a.Od==null?void 0:__c.tH(a.Od),session_id:a.sessionId,source:a.source,action:a.action,design_id:a.ci,doctype_id:a.sn,category_id:a.Jc})}},R8c={ke:"live_audience_comment_displayed",Af(a){return __c.Vn({presenting_context:a.Od==null?void 0:__c.tH(a.Od),session_id:a.sessionId,
comment_id:a.Sy,source:a.source,design_id:a.ci,doctype_id:a.sn,category_id:a.Jc})}},S8c={ke:"live_presentation_comment_sorting_interacted",Af(a){return __c.Vn({presenting_context:a.Od==null?void 0:__c.tH(a.Od),session_id:a.sessionId,sort_order:a.Pv,action:a.action})}},M$=__webpack_require__(186901),T8c=M$.EW,U8c=M$.h5,N$=M$.sH,O$=M$.XI;var L$=__webpack_require__(75402)._;var V8c=__webpack_require__(84654).t;var W8c=__webpack_require__(893360).f;var X8c=__webpack_require__(477176).B7;var Y8c=H(()=>({Nj:X("documentId",1)}));var Z8c=H(()=>({Isb:__c.Y(2),Nj:X(3)}));var $8c=H(()=>({id:X(1)}));var a9c=H(()=>({jNb:__c.iJ(1),kNb:__c.iJ(2,!0)}));var b9c=H(()=>({sessionId:X(1),dOb:__c.G(2,a9c)}));var L8c=class{static G(a){__c.L(a,{lM:N$.ref,fcb:O$.bound,Exa:O$.bound})}fcb(a){this.lM=a;this.ka.track(R8c,{sessionId:this.sessionId,Sy:this.lM.id,source:"fullscreen_mode",ci:""})}Exa(){this.lM=void 0}constructor(a,b){this.sessionId=a;this.ka=b;this.lM=(L8c.G(this),void 0)}};var c9c=H(()=>({sessionId:X(1),Sy:X(2)}));var d9c=H(()=>({sessionId:X(1),Sy:X(2)}));var e9c=H(()=>({sessionId:X(1),Sy:X(2)}));var f9c=H(()=>({sessionId:X(1)}));var g9c=({comments:a,Pv:b,Gxb:c})=>{switch(b){case "NEWEST":return a.sort((d,e)=>e.pE-d.pE);case "OLDEST":return a.sort((d,e)=>d.pE-e.pE);case "TOP_VOTED":return a.sort((d,e)=>{const f=c(e.id)-c(d.id);return f!==0?f:d.pE-e.pE});default:throw Error(`Unknown sort order: ${b}`);}};var M8c=class{static G(a){__c.L(a,{comments:N$.deep,waa:N$.ref,Pv:N$.ref,DR:N$.shallow,ZL:N$.shallow,Kcb:O$.bound,q$a:O$.bound,wOa:O$.bound,VRa:O$.bound,Scb:O$,D$a:O$.bound,G5a:O$.bound,R6:O$.bound})}Kcb(a){this.Pv=a;this.wOa();this.ka.track(S8c,{sessionId:this.sessionId,Pv:this.Pv.toLowerCase(),action:"change_sort_order"})}q$a(){this.wOa();this.ka.track(S8c,{sessionId:this.sessionId,Pv:this.Pv.toLowerCase(),action:"refresh"})}wOa(){this.comments=g9c({comments:this.comments,Pv:this.Pv,Gxb:a=>this.DR.get(a)||
0})}VRa(a){this.comments.findIndex(({id:b})=>b===a.id)===-1&&(this.comments=this.Pv==="NEWEST"?[this.lfb(a),...this.comments]:[...this.comments,this.lfb(a)],this.jva&&this.waa++)}D$a(a){this.comments=this.comments.filter(({id:b})=>b!==a)}G5a(){this.waa=0}xDb(){this.jva=!1}yDb(){this.jva=!0}pPa(a){this.ZL.has(a)?this.MWa(a):this.ZVa(a)}constructor(a,b,c,d,e,f,g){this.kDa=a;this.Oza=b;this.pv=c;this.ka=d;this.sessionId=e;this.J=f;this.Hg=g;this.comments=(M8c.G(this),[]);this.waa=0;this.Pv="NEWEST";
this.DR=new Map;this.ZL=new Set;this.jva=!1;this.Scb=(h,k,l)=>{this.DR.set(h,k);l==="voted"?this.ZL.add(h):l==="updated"&&(this.ZL.has(h)?this.ZL.delete(h):this.ZL.add(h))};this.MWa=async h=>{const k=L$()();try{try{k.r(await k.s(this.pv.MWa(new d9c({sessionId:this.sessionId,Sy:h}))))}catch(l){k.r(),this.J.Vb(l)}}finally{k.s()}};this.ZVa=async h=>{const k=L$()();try{try{k.r(await k.s(this.pv.ZVa(new e9c({sessionId:this.sessionId,Sy:h}))))}catch(l){k.r(),this.J.Vb(l)}}finally{k.s()}};this.LJb=async h=>
{const k=L$()();try{try{const l=k.r(await k.s(this.pv.v3b(new f9c({sessionId:h}))));U8c(()=>{l.K$b.forEach(m=>{this.ZL.add(m)});l.Wgc.forEach(m=>{this.DR.set(m.Sy,m.FW)})})}catch(l){k.r(),this.J.Vb(l)}}finally{k.s()}};this.lfb=h=>{this.DR.has(h.id)||this.DR.set(h.id,0);return{...h,kDa:()=>this.kDa(),Oza:()=>this.Oza(h),V_:!1,R6:()=>this.R6(h.id),FW:T8c(()=>this.DR.get(h.id)||0),OSb:T8c(()=>this.ZL.has(h.id)),pPa:k=>this.pPa(k)}};this.R6=async h=>{const k=L$()();try{const l=this.comments.find(({id:m})=>
m===h);if(l!==void 0&&!l.V_){l.V_=!0;try{k.r(await k.s(this.pv.R6(new c9c({sessionId:this.sessionId,Sy:h}))))}catch(m){k.r(),this.Hg.MD({BF:__c.K("ojlXGA")}),this.J.Vb(m)}finally{U8c(()=>l.V_=!1)}}}finally{k.s()}}}};var O8c={origin:{x:.05,width:.15,y:1,height:0},XNb:{x:{min:-100,max:100},y:{min:-500,max:-300}}};var N8c=class{static G(a){__c.L(a,{count:N$.ref,$gb:O$.bound})}$gb(a){this.count=a}constructor(){this.count=(N8c.G(this),0)}};var h9c,i9c;h9c=Symbol("Error starting live session");
i9c=class{static G(a){__c.L(a,{state:N$.ref,Hfa:N$.ref,GR:T8c,connect:O$,setState:O$})}get GR(){if(this.ab.status===2)return 3;if(this.Hfa)return 2;const a=this.pv.GR;switch(a){case 2:return 0;case 1:return 1;case 0:case 3:return 2;default:throw new __c.A(a);}}async zOa(a,b){const c=L$()();try{const d=this.state.session;d&&(c.r(await c.s(this.pv.zOa({sessionId:d.id,body:{data:a}}))),this.setState({...this.state,session:{...this.state.session,Kf:b}}))}finally{c.s()}}constructor(a,b,c,d,e,f,g){this.Hg=
a;this.pv=b;this.J=c;this.ab=d;this.Nj=e;this.ka=f;this.Pia=g;this.state=(i9c.G(this),{status:0});this.Hfa=!1;this.G4=[];this.WZ=async()=>{const h=L$()();try{if(this.state.status===0){var k=this.Nj;try{const {session:l}=h.r(await h.s(this.pv.Dvb(new Y8c({Nj:k}))));l&&h.r(await h.s(P8c(this,l)))}catch(l){h.r(),this.J.Vb(l)}}}finally{h.s()}};this.startSession=async()=>{const h=L$()();try{if(this.state.status===0||this.state.status===2){this.setState({status:1});var k=this.Nj;try{const m=h.r(await h.s(this.pv.Dvb(new Y8c({Nj:k}))));
if(m.session)h.r(await h.s(P8c(this,m.session))),this.Hg.MD({BF:__c.K("dX07Ng")});else{var l=h.r(await h.s(this.pv.QYb(new Z8c({Nj:k,Isb:this.Pia?.default}))));h.r(await h.s(P8c(this,l.session)));this.ka.track(Q8c,{sessionId:l.session.id,source:"fullscreen_mode",action:"new_session",ci:""})}}catch(m){h.r(),this.setState({status:2}),this.Hg.MD({BF:__c.K("iUnTqw"),fH:{QL:__c.K("T9Fgtw"),onClick:this.startSession},group:h9c}),this.J.Vb(m)}}}finally{h.s()}};this.cOb=async()=>{const h=L$()();try{if(this.state.status===
3||this.state.status===5){this.setState({...this.state,status:4});var k=this.state,l=this.state.session;try{h.r(await h.s(this.pv.qZb(new $8c({id:l.id})))),this.dispose(),this.setState({status:0}),this.ka.track(Q8c,{sessionId:l.id,source:"fullscreen_mode",action:"end_session",ci:""})}catch(m){h.r(),m instanceof __c.dI?(this.dispose(),this.setState({status:0})):this.setState({...k,status:5})}}}finally{h.s()}};this.connect=({sessionId:h,Lu:k,EC:l,aU:m})=>{this.dispose();h=this.pv.Mpb(new b9c({sessionId:h,
dOb:{jNb:!1,kNb:!0}}),V8c);h=W8c(()=>new X8c)(h);this.Hfa=!1;this.GRa=h.subscribe({next:p=>{p.kind==="SESSION_EXPIRED"&&(this.dispose(),this.setState({status:0}))},error:p=>{this.state.session&&(this.dispose(),this.J.error(p),U8c(()=>this.Hfa=!0))}});k=J8c(k,h);l=K8c(l,h);const n=h.subscribe({next:p=>{p.kind==="CREATE_REACTION"&&m.fmb(p.reaction)}});this.G4.push(l);this.G4.push(k);this.G4.push(()=>n.unsubscribe());h.connect()};this.iyb=h=>{if(this.state.session)switch(h){case 0:case 1:case 3:this.dispose();
break;case 2:this.connect({sessionId:this.state.session.id,Lu:this.state.Lu,EC:this.state.EC,aU:this.state.aU});break;default:throw new __c.A(h);}};this.setState=h=>{this.state=h};this.dispose=()=>{this.G4.forEach(h=>h());this.G4=[];this.GRa?.unsubscribe();this.GRa=void 0};this.pv.jYb.subscribe(this.iyb);this.WZ()}};__c.s0a={};__c.s0a.ckb=i9c;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/180e551340acef4a.js.map