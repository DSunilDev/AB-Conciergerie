(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[89788],{

/***/ 334378:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var Y=__c.Y;var H=__c.H;
var Pqc=async function(a,b){b=b.Idb.map(c=>a.QUa[c]).filter(c=>!!c);return new Oqc({closedCaptions:b})},Rqc=function(a,b){const c=[];let d=0,e=0;for(;d<a.length&&e<b.length;){const f=a[d],g=b[e];Qqc(f,g)?(c.push(f),d++,e++):f.As<g.As?(c.push(f),d++):(c.push(g),e++)}for(;d<a.length;)c.push(a[d]),d++;for(;e<b.length;)(a=c?.[c.length-1])&&Qqc(a,b[e])||c.push(b[e]),e++;return c},Tqc=async function(a){const b=x3()();try{for(const e of a.Wz.keys()){const f=a.BIa.get(e)??0;f>=100?a.G2(e):a.BIa.set(e,f+1)}const c=
Array.from(a.Wz,([e,f])=>({id:e,zd:f})),d=b.r(await b.s(Sqc(a,c)));b.r(await b.s(Promise.allSettled(d.closedCaptions.map(async e=>{const f=x3()();try{if(e.cu){var g=a.Wz.get(e.cu);a.Ska(e,g);e.status==="IMPORTED"&&f.r(await f.s(a.wBa(e.cu,e.M5)))}}finally{f.s()}})))).forEach(e=>{e.status==="rejected"&&a.J?.error(e.reason)})}finally{b.s()}},Vqc=function(a){var b=window;let c;const d=()=>{c=b.setTimeout(y3.wrap(async()=>{Tqc(a).catch(y3.wrap(e=>a.J?.error(e))).finally(y3.wrap(()=>c!=null&&d()))}),1E4)};
Uqc(()=>a.W8a,e=>{e?d():(b.clearTimeout(c),c=void 0)},{fireImmediately:!0})},Sqc=async function(a,b){const c=x3()();try{const d=new Wqc({Idb:b.map(e=>e.id),pNb:b.map(e=>e.zd).filter(__c.sb),LDa:void 0,xvb:!0});return c.r(await c.s(Pqc(a.qY,d)))}finally{c.s()}},Yqc=async function(a,b){const c=x3()();try{b.forEach(k=>{a.oLa(k.id,k.zd)});const d=c.r(await c.s(Sqc(a,b).catch(y3.wrap(k=>{b.forEach(l=>a.G2(l.id));throw Error(k);})))).closedCaptions,e=new Map,[f,g]=__c.mD(b,k=>d.some(l=>l.cu===k.id&&l.LDa===
void 0));f.forEach(k=>{const l=d.find(m=>m.cu===k.id);l&&(e.set(k.id,l.M5),a.Ska(l,k.zd))});const h=g.map(async k=>{const l=x3()();try{const m=l.r(await l.s(Xqc(a,k)));a.Ska(m,k.zd);e.set(k.id,m.M5)}finally{l.s()}});c.r(await c.s(Promise.allSettled(h))).forEach(k=>{k.status==="rejected"&&a.J?.error(k.reason)});return e}finally{c.s()}},Xqc=async function(a,b){const c=x3()();try{try{const d=c.r(await c.s(a.Uha(b)));return c.r(await c.s(a.jla(d.V5.id,b.zd))).V5}catch(d){throw c.r(),a.G2(b.id),d;}}finally{c.s()}},
Zqc=async function(a,b){const c=x3()();try{const d=__c.z(b.url),e=c.r(await c.s(a.fetch(d)));__c.x(Array.isArray(e));const f=e.map(g=>{g=__c.qa(g);return{text:__c.KGa.required("text",g),As:__c.jab.optional("startTimeUs",g)||0,K:__c.jab.optional("durationUs",g)||0}});return{url:d,vob:{yN:b.yN,Pga:f,Ola:!0}}}finally{c.s()}},Qqc=function(a,b){return a.As<b.As+b.K&&a.As+a.K>b.As},$qc=H(()=>({gcc:__c.X(1),params:(0,__c.lJ)(2)})),arc=H(()=>({V5:__c.Qa(1,__c.GX),ngc:__c.G(2,$qc)})),brc=H(()=>({V5:__c.Qa(1,
__c.GX)}));__c.xI.prototype.jla=__c.ea(28,async function(){return new brc({V5:__c.HX})});__c.xI.prototype.DY=__c.ea(27,async function(){throw Error("Not implemented");});__c.xI.prototype.Uha=__c.ea(26,async function(){return new arc({V5:__c.HX})});var Oqc=H(()=>({closedCaptions:__c.Ra(1,__c.GX)})),y3=__webpack_require__(245307).Fm;var x3=__webpack_require__(75402)._;var z3=__webpack_require__(186901),crc=z3.EW,drc=z3.h5,Uqc=z3.mJ,A3=z3.sH,B3=z3.XI;var erc=__webpack_require__(477176).B7;var frc=H(()=>({cu:__c.X(1),Vca:Y(2),gNa:__c.eJ(3)}));var Wqc=H(()=>({type:__c.F("A?",1,"SOURCEIDS"),Idb:__c.hJ(1),pNb:__c.hJ(2),LDa:Y(3),xvb:__c.jJ(4)}));var grc=H(()=>({m8a:Y(1),Dbc:Y(2),type:__c.F("A?",3,"AUTO"),cu:__c.X(31),SO:__c.jJ(32),YH:Y(33),Vca:Y(34)}));var hrc=H(()=>({id:__c.X(1),Vca:Y(2)}));var irc;
irc=class{static G(a){__c.L(a,{iY:A3.shallow,Wz:A3.shallow,W7:A3.shallow,BIa:A3.shallow,Kqa:B3,W8a:crc,bLa:B3,oLa:B3,G2:B3.bound,wBa:B3,Ska:B3.bound})}uka(a){return this.iY.get(a)}Kqa(a,b){this.iY.set(a,b);this.W7.delete(a)}rEa(a){return this.Wz.has(a)&&!this.iY.has(a)}get W8a(){return this.Wz.size>0}get oEa(){return this.x_.EV}bLa(a){this.x_.EV=a}oLa(a,b){this.Wz.set(a,b)}Mla(a){return this.W7.has(a)}G2(a){this.W7.add(a);this.Wz.delete(a)}async CLa({media:a,JKb:b,onError:c}){const d=x3()();try{if(!this.qY.DY)return!1;
if(this.iY.get(a.id)?.Ola||this.Mla(a.id))return!0;this.fda.get(a)&&(this.J?.GA("Requesting new connection for media with existing connection"),this.nea(a));const e=this.SRa+(window.navigator.connection?.rtt??0)*1E3*2,f=performance.now(),g=d.r(await d.s(this.DY(a.id,a.zd,a.Ar+e)));let h=!1;this.fda.set(a,g.subscribe(k=>{drc(()=>{if(!h&&k.resultType!==3){const l=(performance.now()-f)*1E3;l>3E6&&b&&(this.SRa=l)}h=!0;k.aL.length&&this.$0(a.id,k)})},k=>{c?.();this.fda.delete(a);this.G2(a.id);this.J?.error(k)}));
return!0}finally{d.s()}}nea(a){this.fda.get(a)?.unsubscribe();this.fda.delete(a)}$0(a,b){var c=this.iY.get(a);if(!c?.Ola)if(b.resultType===3)b={yN:b.yN,Pga:[...b.aL],Ola:!0},this.Kqa(a,b),this.Wz.delete(a),this.W7.delete(a);else{var d=this.gVa.get(a);c=[d?.reduce((e,f)=>Rqc(e,f.aL),[])??[],b.aL,c?.Pga??[]].reduce((e,f)=>Rqc(e,f),[]);this.Kqa(a,{yN:b.yN,Pga:c,Ola:!1});b.isPartial||this.gVa.set(a,d?[...d,b]:[b])}}async DY(a,b,c){const d=x3()();try{if(!this.qY.DY)throw Error();const e=new erc;return d.r(await d.s(this.qY.DY(new frc({cu:a,
Vca:b,gNa:c}),e)))}finally{d.s()}}async Qja(a){const b=x3()();try{const d=f=>this.Wz.has(f)||this.uka(f),e=__c.Tf(a,f=>f.id).filter(f=>!d(f.id));if(!(e.length<1)){var c=b.r(await b.s(Yqc(this,e)));b.r(await b.s(Promise.all(e.map(f=>this.wBa(f.id,c.get(f.id))))))}}finally{b.s()}}async wBa(a,b){const c=x3()();try{if(b&&b.length!==0)for(const d of b)if(d.url){const e=c.r(await c.s(Zqc(this,d)));this.Kqa(a,e.vob);break}}finally{c.s()}}async Uha(a){const b=x3()();try{const c=new grc({cu:a.id,Vca:a.zd,
YH:void 0,SO:!0});return b.r(await b.s(this.qY.Uha(c)))}finally{b.s()}}async jla(a,b){const c=x3()();try{const d=new hrc({id:a,Vca:b});return c.r(await c.s(this.qY.jla(d)))}finally{c.s()}}Ska(a,b){const c=a.cu,d=a.SZ;if(c)switch(a.status){case "UPLOADING":case "PROCESSING":this.oLa(c,b);break;case "FAILED":if(d==="NO_AUDIO_STREAM"){this.Wz.delete(c);break}this.G2(c);break;case "IMPORTED":this.Wz.delete(c)}}constructor(a,b,c,d,e=f=>window.fetch(f).then(y3.wrap(g=>g.json()))){this.qY=a;this.x_=b;this.YH=
c;this.J=d;this.fetch=e;this.iY=(irc.G(this),new Map);this.gVa=new Map;this.SRa=3E6;this.Wz=new Map;this.W7=new Set;this.BIa=new Map;this.fda=new Map;Vqc(this)}};__c.m7b={};__c.m7b.Oib=irc;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/bfcd5f80c66ca6a0.js.map